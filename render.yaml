# ============================================================
# SecureChannelX - Render Blueprint Configuration
# ============================================================
# This file enables one-click deployment to Render
# Deploy: https://dashboard.render.com/select-repo
# ============================================================

services:
  # Backend Web Service
  - type: web
    name: securechannelx-api
    env: python
    region: oregon # Change to your preferred region
    plan: free # Options: free, starter ($7/month), standard ($25/month)
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT --worker-class eventlet run:app
    rootDir: backend
    healthCheckPath: /api/health
    envVars:
      - key: PYTHON_VERSION
        value: "3.11"
      - key: FLASK_ENV
        value: production
      - key: FLASK_DEBUG
        value: "false"
      - key: SECRET_KEY
        generateValue: true
      - key: JWT_SECRET_KEY
        generateValue: true
      - key: MONGODB_URI
        sync: false # Set this manually in Render dashboard
      - key: REDIS_URL
        sync: false # Set this manually in Render dashboard
      - key: FRONTEND_URL
        value: https://securechannelx.vercel.app # Update with your Vercel URL
      - key: MAIL_SERVER
        value: smtp.gmail.com
      - key: MAIL_PORT
        value: "587"
      - key: MAIL_USE_TLS
        value: "true"
      - key: MAIL_USERNAME
        sync: false # Set this manually
      - key: MAIL_PASSWORD
        sync: false # Set this manually
      - key: MAX_CONTENT_LENGTH
        value: "104857600"
      - key: SOCKETIO_ASYNC_MODE
        value: eventlet

# Note: Frontend is deployed separately on Vercel
# For database and Redis, use external services:
# - MongoDB Atlas: https://www.mongodb.com/cloud/atlas
# - Redis Cloud: https://redis.com/ or Upstash: https://upstash.com/
